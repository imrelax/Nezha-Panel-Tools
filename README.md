# NezhaJsonTools

一个为 Nezha 监控系统设计的现代化 JSON 配置生成工具，提供直观的用户界面来生成和编辑 Nezha 的公开备注 JSON 配置。

---

## ✨ 项目特色

### 🎨 现代化设计
- **玻璃态效果**: 采用现代化的毛玻璃设计，界面通透美观
- **渐变背景**: 动态渐变背景，营造科技感氛围
- **流畅动画**: 丰富的CSS动画和过渡效果，提升用户体验
- **响应式布局**: 完美适配桌面、平板、手机等各种设备
- **深色/浅色主题**: 支持自动主题检测和手动切换，保护用户眼睛

### 🌍 国际化支持
- **中英文双语**: 完整的中英文界面切换
- **智能语言检测**: 自动检测浏览器语言偏好
- **本地化存储**: 用户语言偏好自动保存
- **货币格式**: 支持多种货币显示格式（CNY、USD、EUR、GBP）

### 🏗️ 模块化架构
- **组件化设计**: JavaScript代码拆分为7个功能模块
- **按需加载**: 不同页面只加载必要的模块
- **可维护性**: 每个模块职责单一，易于维护和扩展
- **性能优化**: 模块化加载提升应用启动速度

---

## 🚀 核心功能

### 📋 账单配置 (billingDataMod)
- **智能日期计算**: 支持手动设置或自动计算计费周期
- **灵活计费周期**: 
  - 官方周期: 季、半年、年
  - 非官方周期: 天、周、2年、3年、4年、5年、永久
- **多种计费模式**:
  - 计费模式: 自定义金额和货币
  - 免费模式: 自动设置为0
  - 按量收费: 自动设置为-1
- **自动续费控制**: 可开启/关闭自动续费功能
- **货币支持**: CNY、USD、EUR、GBP多种货币
- **格式验证**: 自动验证和格式化输入数据

### 🌐 套餐配置 (planDataMod)
- **带宽设置**: 支持Mbps、Gbps、无限制等多种规格
- **流量配额**: 支持B/KB/MB/GB/TB/PB + 天/月/季/年
- **流量类型**: 入站/双向流量选择
- **IP地址管理**: IPv4/IPv6地址数量配置
- **网络路由**: AS号码配置
- **动态标签系统**: 支持添加/删除自定义标签

### 📊 流量监控规则 (trafficRules)
- **多种监控类型**: 
  - transfer_in_cycle (入站流量)
  - transfer_out_cycle (出站流量)
  - transfer_all_cycle (总流量)
- **灵活时间周期**: 支持小时/天/周/月/年
- **单位感知**: 支持B/KB/MB/GB/TB单位自动转换
- **阈值设置**: 最小/最大流量阈值配置
- **服务器过滤**: 支持忽略特定服务器ID
- **覆盖模式**: 可选择覆盖或追加规则

### ⚠️ 警报规则 (alertRules)
- **全面监控指标**:
  - 系统资源: CPU、GPU、内存、交换分区、磁盘
  - 网络状态: 网速、流量、离线状态
  - 系统负载: load1、load5、load15
  - 连接数: TCP/UDP连接数
  - 温度监控: 最高温度
- **智能阈值**: 支持最小/最大值设置
- **持续时间**: 可配置触发持续时间
- **服务器过滤**: 支持忽略特定服务器
- **覆盖控制**: 可选择监控所有或忽略所有服务器

---

## 🛠️ 高级功能

### 💻 代码编辑
- **实时预览**: 配置更改即时反映到JSON代码
- **双向同步**: 支持表单编辑和代码编辑双向同步
- **语法验证**: 自动验证JSON格式正确性
- **格式化**: 自动格式化JSON代码
- **一键刷新**: 从代码同步到表单配置

### 📱 用户体验
- **键盘快捷键**: 支持Ctrl+C复制、Ctrl+T切换主题等
- **响应式设计**: 移动端优化布局
- **加载动画**: 丰富的加载和状态指示器
- **性能模式**: 可选择启用性能模式减少动画效果
- **状态持久化**: 用户配置自动保存到本地存储

### 🔧 开发工具
- **主题检测**: 自动检测浏览器深浅色主题偏好
- **本地存储**: 用户偏好和配置自动保存
- **错误处理**: 完善的错误提示和处理机制
- **性能监控**: 内置性能监控和优化机制
- **版本检查**: 自动检查更新和版本兼容性

---

## 📖 使用方法

### 🚀 快速开始
1. 打开项目主页面
2. 在左侧设置面板配置您的账单和套餐信息
3. 右侧会实时显示生成的JSON配置
4. 点击"复制"按钮复制配置到剪贴板

### 📊 流量监控配置
1. 切换到"流量监控"页面
2. 选择监控类型和周期
3. 设置流量阈值和单位
4. 配置忽略的服务器ID
5. 复制生成的JSON配置

### ⚠️ 警报规则配置
1. 切换到"警报规则"页面
2. 选择监控指标类型
3. 设置阈值和持续时间
4. 配置服务器过滤规则
5. 复制生成的JSON配置

---

## 🏗️ 技术架构

### 前端技术栈
- **纯前端实现**: 无需服务器，可直接在浏览器中运行
- **模块化JavaScript**: 代码拆分为7个功能模块
- **现代CSS**: 使用Tailwind CSS框架和CSS变量
- **响应式设计**: 适配各种屏幕尺寸
- **本地存储**: 主题、语言和配置偏好保存在本地

### 模块化设计
- **config.js**: 全局状态管理和国际化配置
- **theme.js**: 主题和语言管理
- **utils.js**: 工具函数和UI交互
- **form-handler.js**: 表单处理和配置管理
- **plan-manager.js**: 计划配置和标签管理
- **json-processor.js**: JSON处理和解析
- **app.js**: 主应用初始化和事件管理

### 浏览器兼容性
- Chrome 60+
- Firefox 55+
- Safari 11+
- Edge 79+

---

## 📁 文件结构

```
NezhaJsonTools/
├── index.html          # 主页面 - 备注显示配置
├── traffic.html        # 流量监控页面
├── alert.html          # 警报规则页面
├── about.html          # 关于页面
├── css/
│   └── styles.css      # 自定义样式文件
├── js/
│   ├── config.js       # 全局配置和国际化
│   ├── theme.js        # 主题和语言管理
│   ├── utils.js        # 工具函数和UI交互
│   ├── form-handler.js # 表单处理和配置管理
│   ├── plan-manager.js # 计划配置和标签管理
│   ├── json-processor.js # JSON处理和解析
│   ├── app.js          # 主应用初始化
│   ├── traffic.js      # 流量监控脚本
│   └── alert.js        # 警报规则脚本
└── README.md           # 说明文档
```

---

## 🎯 配置示例

### 基础配置示例
```json
{
  "billingDataMod": {
    "startDate": "2024-12-08T12:58:17.636Z",
    "endDate": "2025-12-08T12:58:17.636Z",
    "autoRenewal": "1",
    "cycle": "Year",
    "amount": "200EUR"
  },
  "planDataMod": {
    "bandwidth": "30Mbps",
    "trafficVol": "1TB/Month",
    "trafficType": "2",
    "IPv4": "1",
    "IPv6": "1",
    "networkRoute": "4837",
    "extra": "Einstein"
  }
}
```

### 流量监控示例
```json
[
  {
    "type": "transfer_out_cycle",
    "max": 1099511627776,
    "cycle_start": "2022-01-01T00:00:00+08:00",
    "cycle_interval": 1,
    "cycle_unit": "month",
    "cover": 1,
    "ignore": {"3": true, "4": true}
  }
]
```

### 警报规则示例
```json
[
  {
    "type": "offline",
    "duration": 10
  },
  {
    "type": "cpu",
    "max": 90,
    "duration": 300
  }
]
```

---

## 🌟 项目亮点

### 🎨 视觉设计
- **现代化UI**: 采用最新的设计趋势
- **流畅动画**: 60fps流畅动画效果
- **视觉反馈**: 丰富的交互反馈
- **无障碍设计**: 支持键盘导航和屏幕阅读器
- **主题系统**: 完整的深色/浅色主题支持

### 🧠 智能功能
- **自动检测**: 自动主题和语言检测
- **智能验证**: 实时数据验证和格式化
- **状态管理**: 智能状态持久化和恢复
- **性能优化**: 防抖、节流和懒加载机制

### 🔒 安全可靠
- **本地处理**: 所有数据处理在本地完成
- **无数据收集**: 不收集用户隐私数据
- **开源透明**: 完全开源，代码透明
- **持续更新**: 定期功能更新和bug修复

### 🚀 性能优化
- **模块化加载**: 按需加载JavaScript模块
- **代码分离**: 功能模块独立，减少耦合
- **缓存机制**: 智能本地存储和缓存
- **性能模式**: 可选择性能优化模式

---

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

### 开发环境
1. Fork项目到您的GitHub
2. Clone到本地开发环境
3. 使用HTTP服务器运行项目（如`python3 -m http.server`）
4. 修改代码并测试
5. 提交Pull Request

### 功能建议
- 在GitHub Issues中提出新功能建议
- 详细描述功能需求和实现方案
- 提供使用场景和示例

### 代码规范
- 遵循现有的代码风格和模块化结构
- 添加适当的注释和文档
- 确保新功能与现有主题系统兼容
- 测试多语言和响应式布局

---

## 📄 许可证

本项目采用MIT许可证，详见LICENSE文件。

---

## 🙏 致谢

- **Nezha项目**: 提供优秀的服务器监控解决方案
- **Tailwind CSS**: 提供强大的CSS框架
- **Font Awesome**: 提供精美的图标库
- **开源社区**: 所有贡献者和用户的支持

---

## 📞 联系方式

- **项目地址**: [GitHub](https://github.com/LAGSNESOwO/NezhaJSONTools)
- **作者网站**: [X-Man](https://xxxx.im)

---

**⭐ 如果这个项目对您有帮助，请给我们一个Star！**
