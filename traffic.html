<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å“ªå’é¢æ¿å·¥å…· - æµé‡ç›‘æ§è§„åˆ™é…ç½®</title>
  <meta name="description" content="å“ªå’é¢æ¿å·¥å…·ï¼Œæ”¯æŒæµé‡ç›‘æ§è§„åˆ™é…ç½®ï¼Œå¿«é€Ÿç”Ÿæˆå“ªå’ç›‘æ§é¢æ¿çš„JSONé…ç½®æ–‡ä»¶">
  <meta name="keywords" content="å“ªå’é¢æ¿,JSONç”Ÿæˆå™¨,æµé‡ç›‘æ§,æœåŠ¡å™¨ç›‘æ§,é…ç½®å·¥å…·">
  <meta name="author" content="å“ªå’é¢æ¿å·¥å…·">
  <meta property="og:title" content="å“ªå’é¢æ¿å·¥å…·">
  <meta property="og:description" content="å¿«é€Ÿç”Ÿæˆå“ªå’ç›‘æ§é¢æ¿çš„JSONé…ç½®æ–‡ä»¶ï¼Œæ”¯æŒæµé‡ç›‘æ§è§„åˆ™é…ç½®">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="å“ªå’é¢æ¿å·¥å…·">
  <meta name="twitter:description" content="å¿«é€Ÿç”Ÿæˆå“ªå’ç›‘æ§é¢æ¿çš„JSONé…ç½®æ–‡ä»¶ï¼Œæ”¯æŒæµé‡ç›‘æ§è§„åˆ™é…ç½®">
  <link rel="icon" type="image/png" href="assets/img/ico.png">

  <script src="https://cdn.tailwindcss.com"></script>
  <!-- ç»Ÿä¸€æ ¸å¿ƒæ–‡ä»¶ (åŒ…å« Tailwind é…ç½®å’Œæµè§ˆå™¨å…¼å®¹æ€§æ£€æŸ¥) -->
  <script src="js/core/unified-core.js"></script>

</head>
<body class="min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 transition-all duration-300">
  <!-- å¯¼èˆªæ å’ŒèƒŒæ™¯å°†é€šè¿‡å…±äº«ç»„ä»¶åŠ¨æ€æ’å…¥ -->



  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <div class="main-content" id="settings-view">
      <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
        <div class="space-y-6">
          <!-- æµé‡ç›‘æ§è§„åˆ™ -->
          <div class="glass-card glass-card-hover overflow-hidden">
            <div class="glass-header cursor-pointer hover:bg-slate-50/50 dark:hover:bg-slate-700/50 transition-colors duration-300" onclick="toggleCardCollapse(this)">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100 flex items-center">
                  <div class="w-8 h-8 flex items-center justify-center mr-3">
                    <span class="text-white text-sm">ğŸ“Š</span>
                  </div>
                  <span data-key="trafficMonitoring" data-module="traffic"></span>
                </h3>
  
              </div>
            </div>
            <div class="glass-content card-content space-y-6">
            <div class="space-y-2">
              <label class="label-text" data-key="type" data-module="traffic"></label>
              <select id="ruleType" onchange="updateTrafficRule()" class="glass-input">
                <option value="transfer_in_cycle" data-key="inboundTraffic" data-module="traffic">å…¥ç«™æµé‡</option>
                <option value="transfer_out_cycle" selected data-key="outboundTraffic" data-module="traffic">å‡ºç«™æµé‡</option>
                <option value="transfer_all_cycle" data-key="bidirectionalTraffic" data-module="traffic">åŒå‘æµé‡</option>
              </select>
            </div>
            <div class="space-y-2">
              <label class="label-text" data-key="minValue" data-module="traffic"></label>
              <div class="flex gap-3">
                <input type="number" id="minValue" onchange="updateTrafficRule()" class="glass-input flex-1">
                <select id="minUnit" onchange="updateTrafficRule()" class="glass-input w-auto">
                  <option value="1">B</option>
                  <option value="1024">KB</option>
                  <option value="1048576">MB</option>
                  <option value="1073741824" selected>GB</option>
                  <option value="1099511627776">TB</option>
                </select>
              </div>
            </div>
            <div class="space-y-2">
              <label class="label-text" data-key="maxValue" data-module="traffic"></label>
              <div class="flex gap-3">
                <input type="number" id="maxValue" onchange="updateTrafficRule()" class="glass-input flex-1">
                <select id="maxUnit" onchange="updateTrafficRule()" class="glass-input w-auto">
                  <option value="1">B</option>
                  <option value="1024">KB</option>
                  <option value="1048576">MB</option>
                  <option value="1073741824" selected>GB</option>
                  <option value="1099511627776">TB</option>
                </select>
              </div>
            </div>
            <div class="space-y-2">
              <label class="label-text" data-key="cycleStart" data-module="traffic"></label>
              <input type="datetime-local" id="cycleStart" onchange="updateTrafficRule()" class="glass-input">
            </div>
            <div class="space-y-2">
              <label class="label-text" data-key="cycleInterval" data-module="traffic"></label>
              <input type="number" id="cycleInterval" value="1" onchange="updateTrafficRule()" class="glass-input">
            </div>
            <div class="space-y-2">
              <label class="label-text" data-key="cycleUnit" data-module="traffic"></label>
              <select id="cycleUnit" onchange="updateTrafficRule()" class="glass-input">
                <option value="hour" data-zh="å°æ—¶" data-en="Hour">å°æ—¶</option>
                <option value="day" data-zh="å¤©" data-en="Day">å¤©</option>
                <option value="week" data-zh="å‘¨" data-en="Week">å‘¨</option>
                <option value="month" selected data-zh="æœˆ" data-en="Month">æœˆ</option>
                <option value="year" data-zh="å¹´" data-en="Year">å¹´</option>
              </select>
            </div>
            <div class="flex items-center justify-between">
              <label class="text-sm font-semibold text-slate-700 dark:text-slate-300" data-key="cover" data-module="traffic"></label>
              <label class="relative inline-flex items-center cursor-pointer">
                <input type="checkbox" id="cover" onchange="updateTrafficRule()" class="sr-only peer">
                <div class="w-11 h-6 bg-slate-200/80 dark:bg-slate-700/80 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-500/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all after:shadow-sm dark:border-slate-600 peer-checked:bg-gradient-to-r peer-checked:from-primary-500 peer-checked:to-secondary-500"></div>
              </label>
            </div>
            <div class="space-y-2">
              <label class="label-text" data-key="ignoreList" data-module="traffic"></label>
              <input type="text" id="ignoreList" placeholder="3,4" onchange="updateTrafficRule()" class="glass-input">
            </div>
            </div>
          </div>
        </div>
        
        <!-- å³ä¾§é¢æ¿ -->
        <div class="space-y-6">
          <!-- JSON é…ç½® -->
          <div class="glass-card glass-card-hover overflow-hidden">
            <div class="glass-header cursor-pointer hover:bg-slate-50/50 dark:hover:bg-slate-700/50 transition-colors duration-300" onclick="toggleCardCollapse(this)">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100 flex items-center">
                  <div class="w-8 h-8 flex items-center justify-center mr-3">
                    <span class="text-white text-sm">ğŸ’»</span>
                  </div>
                  <span data-key="jsonConfig" data-module="traffic"></span>
                </h3>
                <div class="flex items-center space-x-2">
                  <button class="bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white glass-button shadow-orange-500/30 hover:shadow-orange-500/50 hover:-translate-y-0.5" onclick="refreshTrafficData(event)">
                    <span class="mr-2">ğŸ”„</span>
                    <span data-key="refresh" data-module="common"></span>
                  </button>
                  <button class="bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white glass-button shadow-emerald-500/30 hover:shadow-emerald-500/50 hover:-translate-y-0.5" onclick="copyTrafficCode(event)">
                    <span class="mr-2">ğŸ“‹</span>
                    <span data-key="copy" data-module="common"></span>
                  </button>
  
                </div>
              </div>
            </div>
            <div class="glass-content card-content">
              <textarea id="trafficJson" spellcheck="false" class="w-full h-96 p-6 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 font-mono text-sm border-0 focus:ring-0 resize-none leading-relaxed" readonly></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

  </div>

  <!-- æ¨¡æ€æ¡†å’Œé¡µè„šå°†é€šè¿‡å…±äº«ç»„ä»¶åŠ¨æ€æ’å…¥ -->


  
  <!-- å¼•å…¥å¤šè¯­è¨€ç®¡ç†å™¨ -->
  <script src="js/i18n/cn.js"></script>
  <script src="js/i18n/en.js"></script>
  <script src="js/utils/common-utils.js"></script>
  <script src="js/i18n/i18n-unified.js"></script>
  
  <!-- å¼•å…¥å…±äº«ç»„ä»¶å’Œä¸»é¢˜è„šæœ¬ -->
  <script src="js/components/shared-components.js"></script>
  
  <!-- å¼•å…¥æ ¸å¿ƒè„šæœ¬ -->
  <script src="js/core/core.js"></script>
  <script src="js/components/theme.js"></script>
  
  <!-- å¼•å…¥é¡µé¢ä¸“ç”¨è„šæœ¬ -->
  <script src="js/pages/traffic.js"></script>
  
  <!-- é¡µé¢åˆå§‹åŒ– -->
  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      try {
        // åˆå§‹åŒ–ç»Ÿä¸€ç¿»è¯‘ç®¡ç†å™¨
        if (typeof unifiedI18nManager !== 'undefined') {
          await unifiedI18nManager.init();
        }
        
        // åˆå§‹åŒ–å…±äº«ç»„ä»¶
        if (typeof initializeSharedComponents === 'function') {
          initializeSharedComponents('traffic');
        }
        
        // åˆå§‹åŒ–é¡µé¢åŠŸèƒ½
        if (typeof initializeTrafficPage === 'function') {
          initializeTrafficPage();
        }
      } catch (error) {
        console.error('é¡µé¢åˆå§‹åŒ–å¤±è´¥:', error);
      }
    });
  </script>
  
</body>
</html>
